<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AccNotes - Übersicht aller Barrierefreiheits-Notizen">
    <title>Notizen-Übersicht - AccNotes</title>
    <link rel="stylesheet" href="styles/modern-theme.css">
</head>
<body>
    <!-- Skip link for screen reader users -->
    <a href="#main-content" class="skip-link">Zum Hauptinhalt springen</a>

    <!-- Theme Toggle -->
    <button class="theme-toggle" aria-label="Zwischen hellem und dunklem Design wechseln" title="Design wechseln" id="theme-toggle">
        <span aria-hidden="true">🌓</span>
    </button>

    <main id="main-content" class="container">
        <header>
            <h1>📋 Barrierefreiheits-Notizen Übersicht</h1>
        </header>

        <!-- Statistics Section -->
        <section aria-labelledby="stats-title">
            <h2 id="stats-title" class="sr-only">Statistiken</h2>
            <div class="stats" role="region" aria-label="Notizen-Statistiken">
                <div class="stat">
                    <div class="stat__number" id="total-notes" aria-label="Anzahl Notizen gesamt">0</div>
                    <div class="stat__label">Gesamt</div>
                </div>
                <div class="stat">
                    <div class="stat__number" id="notes-today" aria-label="Anzahl Notizen heute">0</div>
                    <div class="stat__label">Heute</div>
                </div>
                <div class="stat">
                    <div class="stat__number" id="unique-pages" aria-label="Anzahl eindeutige Seiten">0</div>
                    <div class="stat__label">Seiten</div>
                </div>
                <div class="stat">
                    <div class="stat__number" id="bitv-notes" aria-label="Anzahl BITV-Notizen">0</div>
                    <div class="stat__label">BITV-Tests</div>
                </div>
                <div class="stat">
                    <div class="stat__number" id="failed-tests" aria-label="Anzahl nicht bestandene Tests">0</div>
                    <div class="stat__label">Nicht bestanden</div>
                </div>
            </div>
        </section>

        <!-- BITV Progress Dashboard -->
        <section class="info-panel" aria-labelledby="bitv-progress-title" id="bitv-dashboard" style="display: none;">
            <h2 id="bitv-progress-title" class="info-panel__title">📊 BITV-Fortschritt</h2>
            <div id="bitv-progress-container">
                <!-- Progress bars will be generated here -->
            </div>
        </section>

        <!-- Export Section -->
        <section class="info-panel" aria-labelledby="export-title">
            <h2 id="export-title" class="info-panel__title">📥 Export & Verwaltung</h2>
            <div class="controls">
                <div class="controls__group">
                    <button type="button" onclick="exportAllNotes()" class="btn btn--secondary">
                        <span aria-hidden="true">📦</span>
                        Alle als ZIP exportieren
                    </button>
                    <button type="button" onclick="exportFilteredNotes()" class="btn btn--secondary">
                        <span aria-hidden="true">🎯</span>
                        Gefilterte exportieren
                    </button>
                    <button type="button" onclick="exportNotesAsCSV()" class="btn btn--secondary">
                        <span aria-hidden="true">📊</span>
                        Als CSV exportieren
                    </button>
                    <button type="button" onclick="exportBitvReport()" class="btn btn--primary">
                        <span aria-hidden="true">✅</span>
                        BITV-Bericht exportieren
                    </button>
                </div>
                <div class="controls__group">
                    <button type="button" onclick="bulkDeleteFiltered()" class="btn btn--warning"
                            aria-describedby="bulk-delete-help">
                        <span aria-hidden="true">🎯🗑️</span>
                        Gefilterte löschen
                    </button>
                    <button type="button" onclick="clearAllNotes()" class="btn btn--danger"
                            aria-describedby="clear-help">
                        <span aria-hidden="true">🗑️</span>
                        Alle löschen
                    </button>
                    <div id="bulk-delete-help" class="sr-only">Löscht alle Notizen, die den aktuellen Filterkriterien entsprechen</div>
                    <div id="clear-help" class="sr-only">Löscht alle gespeicherten Notizen unwiderruflich</div>
                </div>
            </div>
        </section>

        <!-- Filter and Sort Controls -->
        <section aria-labelledby="filter-title">
            <h2 id="filter-title" class="sr-only">Filter und Sortierung</h2>
            <div class="controls">
                <div class="controls__group">
                    <button type="button" onclick="refreshNotes()" class="btn btn--secondary">
                        <span aria-hidden="true">🔄</span>
                        Aktualisieren
                    </button>

                    <label for="sort-select" class="form-label">Sortierung:</label>
                    <select id="sort-select" onchange="sortNotes()" class="form-select" style="width: auto;">
                        <option value="newest">Neueste zuerst</option>
                        <option value="oldest">Älteste zuerst</option>
                        <option value="page">Nach Seite</option>
                        <option value="bitv-step">Nach BITV-Prüfschritt</option>
                        <option value="evaluation">Nach Bewertung</option>
                    </select>
                </div>

                <div class="controls__group">
                    <label for="search-input" class="form-label">Suche:</label>
                    <input type="search"
                           id="search-input"
                           class="form-input"
                           style="width: 250px;"
                           placeholder="Notizen durchsuchen..."
                           onkeyup="filterNotes()"
                           aria-describedby="search-help">
                    <div id="search-help" class="sr-only">Durchsucht Titel, URL, Inhalt und BITV-Prüfschritte</div>
                </div>
            </div>

            <!-- BITV Filter Controls -->
            <div class="controls bitv-filters">
                <div class="controls__group">
                    <label for="bitv-category-filter" class="form-label">BITV-Kategorie:</label>
                    <select id="bitv-category-filter" onchange="filterNotes()" class="form-select" style="width: auto;">
                        <option value="">Alle Kategorien</option>
                    </select>
                </div>

                <div class="controls__group">
                    <label for="bitv-evaluation-filter" class="form-label">Bewertung:</label>
                    <select id="bitv-evaluation-filter" onchange="filterNotes()" class="form-select" style="width: auto;">
                        <option value="">Alle Bewertungen</option>
                        <option value="passed">✅ Bestanden</option>
                        <option value="failed">❌ Nicht bestanden</option>
                        <option value="partial">⚠️ Teilweise bestanden</option>
                        <option value="needs_review">📝 Zu überprüfen</option>
                    </select>
                </div>

                <div class="controls__group">
                    <label for="notes-type-filter" class="form-label">Typ:</label>
                    <select id="notes-type-filter" onchange="filterNotes()" class="form-select" style="width: auto;">
                        <option value="">Alle Notizen</option>
                        <option value="bitv">Nur BITV-Tests</option>
                        <option value="general">Nur allgemeine Notizen</option>
                    </select>
                </div>

                <div class="controls__group">
                    <label for="website-filter" class="form-label">Website:</label>
                    <select id="website-filter" onchange="filterNotes()" class="form-select" style="width: auto;">
                        <option value="">Alle Websites</option>
                    </select>
                </div>

                <div class="controls__group">
                    <button type="button" onclick="clearFilters()" class="btn btn--secondary btn--small">
                        <span aria-hidden="true">🗑️</span>
                        Filter zurücksetzen
                    </button>
                </div>
            </div>
        </section>

        <!-- Notes List -->
        <section aria-labelledby="notes-title">
            <h2 id="notes-title" class="sr-only">Notizen-Liste</h2>
            <div id="notes-container" role="region" aria-live="polite" aria-label="Notizen-Liste">
                <div class="no-notes">
                    <p>📝 Keine Notizen gefunden.</p>
                    <p>Erstellen Sie Ihre erste Notiz über das Kontextmenü!</p>
                </div>
            </div>
        </section>
    </main>

    <script src="scripts/theme-toggle.js"></script>
    <script src="scripts/bitv-catalog.js"></script>
    <script src="notes-overview.js"></script>
</body>
</html>